{
  "name": "Apache Connector",
  "tagline": "Apache Connector for libModSec (aka ModSecurity v3)",
  "body": "# Introduction\r\nBefore the start of GSoC 2016; I was not considerably aware about the web application firewalls, especially about their internals and working mechanism. As information security and digital forensics are my core research areas of interest so I have dug up all related organizations in the list and I found ModSecurity most sparking for me. The next phase was to submit a proposal, but before that I was needed to choose a project; I have selected “Apache Connector for libModSecurity” because Apache httpd is the most popular, open source web server, and it is used by more than 50% of internet.\r\n\r\nModSecurity is a web application layer level firewall and libModSecurity is a major rewrite of ModSecurity because ModSecurity version 2.9.0 is available on different platforms, including Apache, IIS and NGINX but it really favors an Apache Deployment. ModSecurity standalone is basically a wrapper that packs requests from different formats into an Apache format, to later be processed by ModSecurity in the same way that it works on an Apache web server. That was certainly the fastest way to have ModSecurity running on different platforms, but at the cost of performance and high amount of dependencies. After splitting the ModSecurity between “connectors” and “core”; the core has been naturally become a library and the connectors become consumers of the library. Hence, ModSecurity core becomes completely independent of the underlying web server and the source code that is required to interact with a given web server is called “connector”. The libModSecurity isn’t feature complete and stable yet and I think that is an edge for student developers like me :)\r\n\r\n_Point to Ponder: _As defined above that ModSecurity is most favorable for Apache so the question is why connector for Apache, then? It’s simple because version 3 means more advance and modern than earlier versions in terms of performance and features, ModSecurity will be modular architecture. “Core” and “Connectors” is the future of ModSecurity.\r\n\r\nApache Connector for libModSecurity is a currently under-development Apache module in C programming using:\r\n\r\n* libModSecurity\r\n* Apache HTTP Server API\r\n* Apache Portable Runtime Library\r\n* Apache Portable Runtime Utility Library\r\n\r\nThis module will be basically based on input and output filters, those enables it to process incoming and outgoing data in a highly flexible and configurable manner; pre-processing of incoming data and post-processing of outgoing data at different phases and parts including:\r\n\r\n* Request headers\r\n* Request body\r\n* Response headers\r\n* Response body\r\n* Logging\r\n\r\nHere are the diagramed representations of input filter/request processing in Figure 1 and output filter/response processing in Figure 2.\r\n\r\n![](https://github.com/tahirramzan/ModSecurity-apache/blob/gh-pages/1.png)\r\nFigure 1\r\n \r\n![](https://github.com/tahirramzan/ModSecurity-apache/blob/gh-pages/2.png)\r\nFigure 2\r\n\r\n## Functional Requirements:\r\n\r\n**Request Processing**\r\nThere are two parts of request processing:\r\n\r\n_Request Headers Processing_\r\nAcquire the request headers before any other module access it and hold it until processing completes by libModSecurity. This section of processing can pass same request headers or modified request headers to other modules for further processing or decline the request for any further processing and call the logging function to log the transaction.\r\n\r\n_Request Body Processing_\r\nAcquire the request body before any other module access it and hold it until processing completes by libModSecurity. This section of processing can pass same request body or modified request body to other modules for further processing or decline the request for any further processing and call the logging function to log the transaction.\r\n\r\n**Response Processing**\r\nThere are two parts of response processing:\r\n\r\n_Response Headers Processing_\r\nAcquire the response headers after all other modules’ processing and hold it until processing completes by libModSecurity. This section of processing can pass same response headers or modified response headers to the Apache httpd for serving to the client and call the logging function to log the transaction.\r\n\r\n_Response Body Processing_\r\nAcquire the response body after all other modules’ processing and hold it until processing completes by libModSecurity. This section of processing can pass same response body or modified response body to the Apache httpd for serving to the client and call the logging function to log the transaction.\r\n\r\n**Logging**\r\nLogging of each transaction is also a functional requirement of this project; logging will be done for each successful transaction completion and for each unsuccessful transaction finish.\r\n\r\n## Nonfunctional Requirements:\r\nHere are the some nonfunctional requirements of this project:\r\n* Open source\r\n* Documentation\r\n* Efficiency & Effectiveness\r\n* Performance & Stability\r\n* Testability & Usability\r\n\r\n## User Interfaces:\r\nNot Applicable for this project.\r\n\r\n## Databases Design and Schema:\r\nAs for now; according to my understanding, there will not be any need of databases in this project, but if there will be needed for anything related to the database then the Apache database framework will be used. The apr_dbd API provides database operations functionality and ap_dbd API provides database connection management functionality very efficiently and easily.\r\n\r\n#Source Code Repository:\r\n[Installation Guide, Compilation Recipes and Source Code  Repository  ](https://github.com/tahirramzan/ModSecurity-apache)\r\n\r\n# _Current Status_\r\nCurrently, I have completed body extraction and handling through input and output filters, where I have copied request and response bodies with bucket and bucket brigades for passing them to libModSec for further processing. The source code of request headers and response headers is quite buggy and not working as required.\r\n\r\n\r\n# Acknowledgement\r\nI would like to thanks and best regards to my mentors Chaim Sanders, Felipe Zimmerle, and Robert Paprocki for their concrete support, quick response, patience and trust on me. I also want to thank my fellow mates Akhil Koul and Manish Malik.\r\n\r\n_Thanks to Google and ModSecurity for providing such a great learning and networking experience. _\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}